import {LogNsAdapter} from '/resources/helper.js';

export async function main(ns) {
    const log = new LogNsAdapter(ns);
    
    const timestampStart: number = Date.now();
    
    const target: string = ns.args[0];
    const threadCount: number = ns.args[1];
    const marketImpact: boolean = ns.args[2];
    const blockId: number = ns.args[3];
    const stepId: number = ns.args[4];
    
    const opId: string = `${blockId}-${stepId}`;
    log.info(`${target} - ${opId} - Hack start - hThreads: ${threadCount}`);
    
    const earnedMoney = await ns.hack(target, {threads: threadCount, stock: marketImpact});
    
    const timestampStop: number = Date.now();
    const hackDuration: number = timestampStop - timestampStart;
    log.info(`${target} - ${opId} - Hack stop - Duration ${hackDuration} - Gain: ${earnedMoney}\n`);
}
